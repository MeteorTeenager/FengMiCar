<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qfedu.bus.mapper.CarMapper">

    <!--定义resultMap-->
    <resultMap id="base_result_data" type="com.qfedu.bus.domain.Car">
        <!--数据库表字段和domian中user字段的对应关系-->
        <id column="carnumber" jdbcType="VARCHAR" property="carnumber" />
        <result column="cartype" jdbcType="VARCHAR" property="cartype" />
        <result column="color" jdbcType="VARCHAR" property="color" />
        <result column="price" jdbcType="DOUBLE" property="price" />
        <result column="rentprice" jdbcType="DOUBLE" property="rentprice" />
        <result column="deposit" jdbcType="DOUBLE" property="deposit" />
        <result column="isrenting" jdbcType="INTEGER" property="isrenting" />
        <result column="description" jdbcType="VARCHAR" property="description" />
        <result column="carimg" jdbcType="VARCHAR" property="carimg" />
        <result column="createtime" jdbcType="TIMESTAMP" property="createtime" />
    </resultMap>

    <sql id="car_column_list">
        carnumber,cartype,color,price,rentprice,deposit,isrenting,description,carimg,createtime
    </sql>

      <!--
       用户带条件的全查询
      -->
    <select id="queryAllCar" resultMap="base_result_data">
        select <include refid="car_column_list"/> from bus_car

        <where>
            <if test="carnumber != null and carnumber !=''">
                and carnumber like concat("%",#{carnumber},"%")
            </if>
            <if test="cartype != null and cartype !=''">
                and cartype like concat("%",#{cartype},"%")
            </if>
            <if test="color != null and color !=''">
                and color like concat("%",#{color},"%")
            </if>
            <if test="description != null and description !=''">
                and description like concat("%",#{description},"%")
            </if>
            <if test="isrenting != null">
                and isrenting = #{isrenting}
            </if>
        </where>
            order by createtime desc
    </select>

    
    <!--添加客户-->
    <insert id="addCar">
        insert into bus_car
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="carnumber != null">
                carnumber,
            </if>
            <if test="cartype != null">
                cartype,
            </if>
            <if test="color != null">
                color,
            </if>
            <if test="price != null">
                price,
            </if>
            <if test="rentprice != null">
                rentprice,
            </if>
            <if test="deposit != null">
                deposit,
            </if>
            <if test="isrenting != null">
                isrenting,
            </if>
            <if test="description != null">
                description,
            </if>
            <if test="carimg != null">
                carimg,
            </if>
            <if test="createtime != null">
                createtime,
            </if>
          </trim>

         <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="carnumber != null">
                #{carnumber},
            </if>
            <if test="cartype != null">
                #{cartype},
            </if>
            <if test="color != null">
                #{color},
            </if>
            <if test="price != null">
                #{price},
            </if>
            <if test="rentprice != null">
                #{rentprice},
            </if>
            <if test="deposit != null">
                #{deposit},
            </if>
            <if test="isrenting != null">
                #{isrenting},
            </if>
             <if test="description != null">
                 #{description},
             </if>
             <if test="carimg != null">
                 #{carimg},
             </if>
             <if test="createtime != null">
                 #{createtime},
             </if>
        </trim>
    </insert>

    <!--根据车牌查询车辆对象-->
    <select id="selectCarByCarNumer" resultMap="base_result_data">
        select <include refid="car_column_list"/> from bus_car
        where carnumber = #{carNumber}
    </select>

    <!--根据carNumber进行删除车辆-->
    <delete id="deleteCarByCarNum">
        delete from bus_car  where carnumber = #{carNumber}
    </delete>

    <!--更车辆的方法
    carnumber,cartype,color,price,rentprice,deposit,isrenting,description,carimg,createtime
    -->
   <update id="updateCar">
         update bus_car
         <set>
             <if test="cartype != null">
                 cartype = #{cartype},
             </if>
             <if test="color != null">
                 color = #{color},
             </if>
             <if test="price != null">
                 price = #{price},
             </if>
             <if test="rentprice != null">
                 rentprice = #{rentprice},
             </if>
             <if test="deposit != null">
                 deposit = #{deposit},
             </if>
             <if test="isrenting != null">
                 isrenting = #{isrenting},
             </if>
             <if test="description != null">
                 description = #{description},
             </if>
             <if test="carimg != null">
                 carimg = #{carimg},
             </if>
         </set>
             where carnumber = #{carnumber}
     </update>









    <!--删除客户信息-->
   <!-- <delete id="deleteCustomerById">
        delete from bus_customer where identity = #{identity}
    </delete>-->



</mapper>